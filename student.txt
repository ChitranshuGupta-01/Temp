CREATE OR REPLACE FUNCTION insert_into_onboarding_applications()
RETURNS TRIGGER AS $$
DECLARE
    handlers text[] := ARRAY['user1', 'user2', 'user3'];
    random_handler text;
    app_id text;
BEGIN
    -- Pick a random handler
    random_handler := handlers[ceil(random() * array_length(handlers, 1))];

    -- Generate alphanumeric Application ID
    app_id := 'SC' || (100 + floor(random() * 90000))::text; -- SC + random 5-digit number

    -- Insert applicant into onboarding_applications
    INSERT INTO onboarding_applications (id, applicant, handler, status, application_id)
    VALUES (NEW.id::varchar, NEW.full_name, random_handler, 'Application Processing', app_id); 

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
