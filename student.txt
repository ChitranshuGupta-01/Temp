import axios from 'axios';

export const generateReportCard = async (student) => {
  return axios.post('http://localhost:8080/api/report-card', student);
};






import React, { useState } from 'react';
import { generateReportCard } from './ReportCardService';

function ReportCardForm() {
  const [form, setForm] = useState({ rollno: '', name: '', science: '', maths: '' });
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');

  const handleChange = e => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setMessage('');
    setError('');
    try {
      const response = await generateReportCard({
        ...form,
        science: parseInt(form.science, 10),
        maths: parseInt(form.maths, 10)
      });
      // If backend returns 200 OK, student is good
      if (response.status === 200) {
        setMessage('Student is Good');
      }
    } catch (err) {
      if (err.response && err.response.status === 406) {
        setMessage('Student is Not Good');
      } else {
        setError('Error connecting to server');
      }
    }
  };

  return (
    <div>
      <form onSubmit={handleSubmit}>
        <input name="rollno" type="text" placeholder="Roll No" value={form.rollno} onChange={handleChange} required />
        <input name="name" type="text" placeholder="Name" value={form.name} onChange={handleChange} required />
        <input name="science" type="number" placeholder="Science" value={form.science} onChange={handleChange} required />
        <input name="maths" type="number" placeholder="Maths" value={form.maths} onChange={handleChange} required />
        <button type="submit">Submit</button>
      </form>

      {message && <p>{message}</p>}
      {error && <p style={{color: 'red'}}>{error}</p>}
    </div>
  );
}

export default ReportCardForm;
